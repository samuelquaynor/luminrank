<div class="min-h-screen flex items-center justify-center p-4 bg-bg-primary">
  <div class="w-full max-w-md">
    <!-- Card -->
    <div class="card">
      <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="space-y-6" data-testid="login-form">
        
        <!-- Email Field -->
        <div class="form-group">
          <label for="email" class="label">Email</label>
          <input
            type="email"
            id="email"
            formControlName="email"
            placeholder="Enter your email"
            class="input"
            [class.error]="loginForm.get('email')?.invalid && loginForm.get('email')?.touched"
            data-testid="login-email-input"
          />
          @if (loginForm.get('email')?.invalid && loginForm.get('email')?.touched) {
            <div class="error-message">
              @if (loginForm.get('email')?.errors?.['required']) {
                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
                </svg>
                <span>Email is required</span>
              }
              @if (loginForm.get('email')?.errors?.['email']) {
                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
                </svg>
                <span>Please enter a valid email address</span>
              }
            </div>
          }
        </div>

        <!-- Password Field -->
        <div class="form-group">
          <label for="password" class="label">Password</label>
          <input
            type="password"
            id="password"
            formControlName="password"
            placeholder="Enter your password"
            class="input"
            [class.error]="loginForm.get('password')?.invalid && loginForm.get('password')?.touched"
            data-testid="login-password-input"
          />
          @if (loginForm.get('password')?.invalid && loginForm.get('password')?.touched) {
            <div class="error-message">
              @if (loginForm.get('password')?.errors?.['required']) {
                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
                </svg>
                <span>Password is required</span>
              }
              @if (loginForm.get('password')?.errors?.['minlength']) {
                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
                </svg>
                <span>Password must be at least 6 characters</span>
              }
            </div>
          }
        </div>

        <!-- Server Error -->
        @if (error$ | async; as error) {
          <div class="alert-error">
            <svg class="w-5 h-5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"/>
            </svg>
            <span>{{ error }}</span>
          </div>
        }

        <!-- Submit Button -->
        <button
          type="submit"
          class="btn-primary w-full h-13 text-base relative overflow-hidden group"
          [disabled]="loginForm.invalid || (isLoading$ | async)"
          data-testid="login-submit-button"
        >
          <span class="relative z-10 flex items-center justify-center gap-2">
            @if (isLoading$ | async) {
              <span class="spinner"></span>
              <span>Signing In...</span>
            } @else {
              <span>Sign In</span>
            }
          </span>
          <!-- Ripple effect on hover -->
          <span class="absolute inset-0 bg-white/10 transform scale-0 group-hover:scale-100 transition-transform duration-300 rounded-lg"></span>
        </button>
      </form>

      <!-- Footer -->
      <div class="mt-8 text-center">
        <p class="text-sm text-gray-400">
          Don't have an account?
          <a routerLink="/register" class="link ml-1">Sign up here</a>
        </p>
      </div>
    </div>
  </div>
</div>
